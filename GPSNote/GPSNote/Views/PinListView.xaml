<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:prism ="http://prismlibrary.com" 
             xmlns:controls="clr-namespace:GPSNote.Controls"
             prism:ViewModelLocator.AutowireViewModel="True"
             x:Class="GPSNote.Views.PinListView"
             x:Name="pinListView"
             Title="{Binding Title}"
             IconImageSource="ic_pin.png">
    <ContentPage.Content>
        <AbsoluteLayout >

            <StackLayout >

                <controls:SearchLine TextLine="{Binding SearchPin}" 
                                     CommandSearch="{Binding SearchCommand}"
                                     Padding="0,0,40,0"
                                     TextChangeCommand="{Binding SearchCommand}"/>

                
                <ScrollView Margin="0,0,0,30">
                    <ListView ItemsSource="{Binding PinModelsList, Mode=TwoWay}"
                          HasUnevenRows="True"
                          SelectedItem="{Binding SelectedPin, Mode=TwoWay}"

                              SeparatorVisibility="None">

                            <ListView.ItemTemplate>
                                <DataTemplate>
                                    <!--<ViewCell>
                                    <ViewCell.View>-->

                                <controls:ItemListPin TextName="{Binding Name}"
                                                      TextCoord="{Binding Coordinate}"
                                                      LikeCommand="{Binding LikeCommand}"
                                                      IsFavorit="{Binding IsFavorit, Mode=TwoWay}"/>
                                <!--<Grid ColumnSpacing ="12" RowSpacing="2">

                                            <Grid.RowDefinitions >
                                                <RowDefinition Height="37.5"/>
                                                <RowDefinition Height="37.5"/>
                                            </Grid.RowDefinitions>

                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="68"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="80"/>
                                            </Grid.ColumnDefinitions>

                                            <Button ImageSource="ic_like_gray.png"
                                                    HorizontalOptions="CenterAndExpand"
                                                    VerticalOptions="CenterAndExpand"
                                                    Grid.Row="0"
                                                    Grid.Column="0"
                                                    Grid.RowSpan="2"
                                                    BackgroundColor="#F1F3FD"
                                                    Margin="16,0,0,0"
                                                    CornerRadius="6"/>

                                            <Label Text="{Binding Name}"
                                                       FontSize="25"
                                                       TextColor="#1E242B"
                                                       Grid.Column="1"
                                                       Grid.Row="0"/>


                                            <Label Text="{Binding Coordinate}"
                                                   FontSize="20"
                                                   TextColor="#3D4E61"
                                                   Grid.Column="1"
                                                   Grid.Row="1"/>

                                            <Button ImageSource="ic_left_gray.png"
                                                    Grid.Row="0"
                                                    Grid.Column="2"
                                                    Grid.RowSpan="2"
                                                    Margin="0,0,35,0"
                                                    BackgroundColor="Transparent"/>

                                        </Grid>-->


                                    <!--</viewcell.view>-->

                                    <!--<ViewCell.ContextActions>
                                            <MenuItem Text="Delete"
                                                      IconImageSource="ic_delete.png"
                                                      Command="{Binding Path=BindingContext.DeletePinCommand, Source={x:Reference pinListView}}"
                                                      CommandParameter="{Binding .}"/>
                                            <MenuItem Text="Edit" 
                                                      IconImageSource="ic_edit.png"
                                                      Command ="{Binding Path=BindingContext.EditPinCommand, Source={x:Reference pinListView}}"
                                                      CommandParameter="{Binding .}"/>
                                        </ViewCell.ContextActions>
                                    </ViewCell>-->
                                </DataTemplate>
                            </ListView.ItemTemplate>
                        </ListView>
                </ScrollView>
            </StackLayout>
                
            <Button ImageSource="ic_plus.png"
                    FontSize="35"
                    BackgroundColor="LightBlue"
                    TextColor ="White"
                    AbsoluteLayout.LayoutBounds="1,1"
                    AbsoluteLayout.LayoutFlags="PositionProportional"
                    Margin="0, 0, 30, 70"
                    WidthRequest="70"
                    HeightRequest="70"
                    CornerRadius="35"
                    Command="{Binding CreatePinCommand}"/>
        </AbsoluteLayout>
    </ContentPage.Content>
</ContentPage>